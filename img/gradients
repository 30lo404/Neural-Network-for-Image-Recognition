from PIL import Image
import numpy as np

def grayscale_to_matrix(image_path):
    img = Image.open(image_path)
    gray_img = img.convert('L')
    matrix = np.array(gray_img)
    return matrix

def calculate_gradient(matrix):
    height, width = matrix.shape
    gradient_matrix = np.zeros((height, width))
    
    gradient_filter = np.array([[1, 0, -1],
                                 [2, 0, -2],
                                 [1, 0, -1]])
    
    for i in range(1, height - 1):
        for j in range(1, width - 1):
            gradient = np.sum(matrix[i-1:i+2, j-1:j+2] * gradient_filter)
            gradient_matrix[i, j] = gradient
    
    return gradient_matrix

def display_image(matrix):
    image = Image.fromarray(matrix)
    image.show()

image_path = '2008_002221.jpg' 
gray_matrix = grayscale_to_matrix(image_path)
gradient_matrix = calculate_gradient(gray_matrix)
print(gradient_matrix)
display_image(gradient_matrix)
